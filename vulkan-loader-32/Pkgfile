# Description: Vulkan loader, 32bit
# URL: https://www.khronos.org/vulkan/
# Maintainer: CRUX compat-32 Team, compat-32-ports at crux dot nu
# Depends on: vulkan-loader xorg-libxrandr-32

name=vulkan-loader-32
version=1.2.145
release=1
source=(https://github.com/KhronosGroup/Vulkan-Loader/archive/v$version.tar.gz)

build() {
	export ASFLAGS='--32'

	cmake -SVulkan-Loader-$version -Bbuild -GNinja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib32 \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SKIP_RPATH=True \
		-DBUILD_TESTS=False \
		-DBUILD_LOADER=True \
		-DBUILD_WSI_XCB_SUPPORT=True \
		-DBUILD_WSI_XLIB_SUPPORT=True \
		-DBUILD_WSI_WAYLAND_SUPPORT=OFF

	cmake --build build
	DESTDIR=$PKG cmake --build build --target install
}
